// 05/13/2025 (@davex)
// SPDX-License-Identifier: GPL-2.0-or-later

#include QMK_KEYBOARD_H
#include "layers.h"
#include "process_record_userspace.h"

__attribute__ ((weak))
bool process_record_secrets(uint16_t keycode, keyrecord_t *record) {
  return true;
}
__attribute__ ((weak))
bool process_leader_secrets(void) {
  return true;
}

// custom keycodes
enum custom_keycodes {
    CUSTOM_KEYCODE = USERSPACE_END,
};

// all the keymaps with their defined keycodes
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
//  [BASE_LAYR]
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |D_Esc |    | F1   || F2   || F3   || F4   |    | F5   || F6   || F7   || F8   |    | F9   || F10  || F11  || DF12 |    | Del  |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  | `    || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    || Home |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        || PgUp |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | TD(CAPS)    || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgDn |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | LShift          || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(RSFT)   || Up   || End  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TD(GUI) || Alt     || Space                                        ||TD(RALT) ||TD(FN)   |  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [BASE_LAYR] = LAYOUT_ansi(
        DUAL_ESC,   KC_F1,  KC_F2,  KC_F3,  KC_F4,      KC_F5,  KC_F6,  KC_F7,  KC_F8,      KC_F9, KC_F10, KC_F11, DUAL_F12,     KC_DEL,
        KC_GRV,  KC_1,   KC_2,   KC_3,   KC_4,   KC_5,   KC_6,   KC_7,   KC_8,   KC_9,   KC_0, KC_MINS, KC_EQL,   BSPCFAST,     KC_HOME,
        LT(TMUX_LAYR,KC_TAB),  KC_Q, KC_W, KC_E, KC_R, KC_T, KC_Y,   KC_U,   KC_I,   KC_O,   KC_P, KC_LBRC, KC_RBRC, KC_BSLS,   KC_PGUP,
        TD(CAPS_LAYR),  KC_A,   KC_S,   KC_D,   KC_F,   KC_G,   KC_H,   KC_J,    KC_K,  KC_L,  KC_SCLN, KC_QUOT,    KC_ENT,     KC_PGDN,
        KC_LSFT,            KC_Z,   KC_X,   KC_C,   KC_V,   KC_B,   KC_N,  KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP,  KC_END,
        KC_LCTL, TD(LGUI_OSL), KC_LALT,                   KC_SPC,                   TD(RALT_OSL), TD(FN_OSL), KC_LEFT, KC_DOWN, KC_RGHT
    ),

//  [BASE2_LAYR]
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |D_Esc |    | F1   || F2   || F3   || F4   |    | F5   || F6   || F7   || F8   |    | F9   || F10  || F11  || F12  |    | DF13 |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  | `    || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    ||Insert|  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        ||Delete|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | TD(CAPS)    || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgUp |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | LShift          || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(RSFT)   || Up   || PgDn |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TD(GUI) || Alt     || Space                                        ||TD(RALT) ||TD(FN)   |  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [BASE2_LAYR] = LAYOUT_ansi(
        DUAL_ESC,   KC_F1,  KC_F2,  KC_F3,  KC_F4,      KC_F5,  KC_F6,  KC_F7,  KC_F8,       KC_F9,  KC_F10, KC_F11, KC_F12,   DUAL_F13,
        KC_GRV,  KC_1,  KC_2,   KC_3,   KC_4,   KC_5,   KC_6,   KC_7,    KC_8,  KC_9,   KC_0,  KC_MINS, KC_EQL,   BSPCFAST,      KC_INS,
        LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T,  KC_Y,   KC_U,    KC_I,  KC_O,   KC_P, KC_LBRC, KC_RBRC,  KC_BSLS,   KC_DEL,
        TD(CAPS_LAYR),  KC_A,   KC_S,   KC_D,   KC_F,   KC_G,   KC_H,   KC_J,   KC_K,   KC_L, KC_SCLN, KC_QUOT,    KC_ENT,      KC_PGUP,
        KC_LSFT,            KC_Z,   KC_X,   KC_C,   KC_V,   KC_B,   KC_N,  KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP, KC_PGDN,
        KC_LCTL, TD(LGUI_OSL), KC_LALT,                   KC_SPC,                   TD(RALT_OSL), TD(FN_OSL), KC_LEFT, KC_DOWN, KC_RGHT
    ),

//  [MAC_BASE_LAYR]
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |D_Esc |    | F1   || F2   || F3   || F4   |    | F5   || F6   || F7   || F8   |    | F9   || F10  || F11  || DF12 |    | Del  |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  | `    || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    || Home |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        || PgUp |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | TD(CAPS)    || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgDn |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | LShift          || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(RSFT)   || Up   || End  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TD(LOPT)|| Command || Space                                        ||TD(RCMD) ||TD(FN)   |  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [MAC_BASE_LAYR] = LAYOUT_ansi(
        DUAL_ESC,   KC_F1,  KC_F2,  KC_F3,  KC_F4,      KC_F5,  KC_F6,  KC_F7,  KC_F8,      KC_F9, KC_F10, KC_F11, DUAL_F12,     KC_DEL,
        KC_GRV,  KC_1,   KC_2,   KC_3,   KC_4,   KC_5,   KC_6,   KC_7,   KC_8,   KC_9,   KC_0, KC_MINS, KC_EQL,   BSPCFAST,     KC_HOME,
        LT(TMUX_LAYR,KC_TAB),  KC_Q, KC_W, KC_E, KC_R, KC_T, KC_Y,   KC_U,   KC_I,   KC_O,   KC_P, KC_LBRC, KC_RBRC, KC_BSLS,   KC_PGUP,
        TD(CAPS_LAYR),  KC_A,   KC_S,   KC_D,   KC_F,   KC_G,   KC_H,   KC_J,    KC_K,  KC_L,  KC_SCLN, KC_QUOT,    KC_ENT,     KC_PGDN,
        KC_LSFT,            KC_Z,   KC_X,   KC_C,   KC_V,   KC_B,   KC_N,  KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP,  KC_END,
        KC_LCTL, TD(LOPT_OSL), KC_LCMD,                   KC_SPC,                   TD(RCMD_OSL), TD(FN_OSL), KC_LEFT, KC_DOWN, KC_RGHT
    ),

//  [MAC_BASE2_LAYR]
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |D_Esc |    | F1   || F2   || F3   || F4   |    | F5   || F6   || F7   || F8   |    | F9   || F10  || F11  || F12  |    | DF13 |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  | `    || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    ||Insert|  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        ||Delete|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | TD(CAPS)    || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgUp |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | LShift          || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(RSFT)   || Up   || PgDn |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TR(LOPT)|| Command || Space                                        ||TD(RCMD) ||TD(FN)   |  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [MAC_BASE2_LAYR] = LAYOUT_ansi(
        DUAL_ESC,   KC_F1,  KC_F2,  KC_F3,  KC_F4,      KC_F5,  KC_F6,  KC_F7,  KC_F8,       KC_F9,  KC_F10, KC_F11, KC_F12,   DUAL_F13,
        KC_GRV,  KC_1,  KC_2,   KC_3,   KC_4,   KC_5,   KC_6,   KC_7,    KC_8,  KC_9,   KC_0,  KC_MINS, KC_EQL,   BSPCFAST,      KC_INS,
        LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T,  KC_Y,   KC_U,    KC_I,  KC_O,   KC_P, KC_LBRC, KC_RBRC,  KC_BSLS,   KC_DEL,
        TD(CAPS_LAYR),  KC_A,   KC_S,   KC_D,   KC_F,   KC_G,   KC_H,   KC_J,   KC_K,   KC_L, KC_SCLN, KC_QUOT,    KC_ENT,      KC_PGUP,
        KC_LSFT,            KC_Z,   KC_X,   KC_C,   KC_V,   KC_B,   KC_N,  KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP, KC_PGDN,
        KC_LCTL, TD(LOPT_OSL), KC_LCMD,                   KC_SPC,                   TD(RCMD_OSL), TD(FN_OSL), KC_LEFT, KC_DOWN, KC_RGHT
    ),

//  [FN_LAYR] (green)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |      ||      ||ViRepl||      |    |ChkOut||      ||      ||GitLog|    |GitAdd||Commit||      || Push |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||Arrow || Wave ||              ||SLock |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  | MO(TMUX) ||WMail2||WMail1||Mail  ||RPhone||WPhone||      ||      ||      ||      ||      || Rec1 || Rec2 ||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||Addr  ||City  ||ZIP   ||Phone ||      ||      ||      ||      || Lead ||      || PScr ||               ||HomIns|  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | MO(SFT)         ||      ||Rout  ||Acct  ||      ||      ||      ||      || Ply1 || Ply2 ||Pause || MO(SFT)   ||      ||EndDel|  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         || WM_SYM || MO(CTL) || Space                                        || MO(CTL) ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [FN_LAYR] = LAYOUT_ansi(
        _______,_______,_______, VI_REPLACE,_______, GIT_CHKOUT, _______,_______, GIT_LOG, GIT_ADD, GIT_COMMIT,_______, GIT_PUSH,  LLOCK,
        _______,_______,_______,_______, _______, _______, _______, _______, _______, _______, _______, ARROW, WAVE,  _______,   KC_SCRL,
        MO(TMUX_LAYR),SECRET3,SECRET2,SECRET1,SECRET8,SECRET9,_______,_______,_______,_______,_______,DM_REC1, DM_REC2, _______, _______,
        _______,SECRET4,SECRET5,SECRET6, SECRET7, _______, _______, _______, _______, QK_LEAD, _______, KC_PSCR,        _______, KC_HOME,
        MO(SFT_LAYR),_______,SECRET10,SECRET11,_______,_______,_______,_______,DM_PLY1, DM_PLY2, KC_PAUS, MO(SFT_LAYR), _______,  KC_END,
        _______,  WM_SYM, MO(KCTL_LAYR),                  _______,                    MO(KCTL_LAYR), _______,    _______, _______, _______
    ),

//  [SFT_LAYR] (orange)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |MyComp||      || Calc || Menu |    |      || Prev || Play || Next |    |      || Mute || Vol- || Vol+ |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||      ||              || Num  |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||      ||      ||      ||      ||      ||      ||  P7  ||  P8  ||  P9  || +  - ||      ||      ||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||      ||      ||      ||      ||      ||  P4  ||  P5  ||  P6  || *  / ||      ||               ||MSHold|  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||MSAcl2||      ||      ||      ||      ||      ||  P1  ||  P2  ||  P3  ||      ||           || MSUp || RClk |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        || MSAcl0  ||                       P0                     ||   P.    ||   LClk  |  |MSLft || MSDn ||MSRgt |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [SFT_LAYR] = LAYOUT_ansi(
        _______,KC_MYCM,_______, KC_CALC, KC_APP, _______, KC_MPRV, KC_MPLY, KC_MNXT, _______, KC_MUTE, KC_VOLD, KC_VOLU,          LLOCK,
        _______,_______,_______,_______,_______, _______, _______, _______, _______, _______, _______, _______, _______, _______, KC_NUM,
        _______,_______,_______,_______,_______, _______, _______, KC_P7, KC_P8, KC_P9, DUAL_PLUSMIN, _______, _______, _______, _______,
        _______,_______,_______,_______,_______, _______, _______, KC_P4, KC_P5, KC_P6, DUAL_MULTDIV, _______,         _______,  MK_HOLD,
        _______,MK_ACCEL2, _______,_______,_______,_______,_______, KC_P1, KC_P2, KC_P3, _______,          _______, KC_MS_UP, KC_MS_BTN2,
        _______,_______, MK_ACCEL0,                     KC_P0,                  KC_PDOT, KC_MS_BTN1, KC_MS_LEFT, KC_MS_DOWN, KC_MS_RIGHT
    ),

//  [KCTL_LAYR] (red)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |RMode+||RMode-||      ||      |    |RHue+ ||RHue- ||RSat+ ||RSat- |    |      ||      ||ClrTst||Debug |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  | USB  || BT1  || BT2  || BT3  || 2.4G ||      ||      ||      ||      ||      ||      ||      ||      ||              ||      |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||      ||      ||      ||Reboot||      ||      ||      ||      ||      ||      ||      ||      || ChngBase ||RGBTog|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||      ||      ||Flash ||      ||      ||      ||      ||      ||KTrack||FJLite|| HomeRowLight  ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||      ||      ||EClear||      ||BootLd||      ||      ||      ||      ||      ||           ||RBri+ ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||            Battery Level Check               ||         ||         |  |RSpd- ||RBri- ||RSpd+ |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [KCTL_LAYR] = LAYOUT_ansi(
        _______, RGB_MOD, RGB_RMOD, _______, _______, RGB_HUI, RGB_HUD, RGB_SAI, RGB_SAD,  _______, _______, COLORTEST, DB_TOGG,   LLOCK,
        KC_USB, KC_BT1, KC_BT2, KC_BT3, KC_2G4, _______,_______,_______, _______, _______, _______, _______, _______, _______,   _______,
        _______,_______,_______,_______, QK_RBT, _______,_______,_______, _______, _______, _______, _______, _______, BASE_CHG, RGB_TOG,
        _______,_______,_______,_______, FLASH_KB, _______,_______,_______, _______, _______, KTRACK, FJLIGHT,   HROWLIGHT,      _______,
        _______,_______,_______, EE_CLR, _______, BOOTLDR, _______,_______,_______, _______, _______,          _______, RGB_VAI, _______,
        _______,_______,_______,                          KC_BATQ,                     _______, _______,       RGB_SPD, RGB_VAD, RGB_SPI
    ),

//  [TMUX_LAYR] (cyan)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |TLEKY ||TLCMD ||      ||      |    |TMONON||TMONOF||TVISON||TVISOF|    |TJPANE||      ||WINLFT||WINRGT|    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |      ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              ||      |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||LTRANS||LTRANS||      ||      ||LTRANS||      ||      ||      ||LTRANS||LTRANS||LTRANS||LTRANS||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||LTRANS||LTRANS||      ||      ||      ||      ||      ||LTRANS||LTRANS||LTRANS||               ||LTRANS|  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||LTRANS||LTRANS||LTRANS||      ||      ||LTRANS||      ||LTRANS||LTRANS||LTRANS||           ||LTRANS||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||  LALT   ||                   LTRANS                     ||  LALT   ||         |  |LTRANS||LTRANS||LTRANS|  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [TMUX_LAYR] = LAYOUT_ansi(
        _______, TMUXLKEY, TMUXLCMD, _______, _______,  TMONON, TMONOF, TVISON, TVISOF,  TJPANE, _______, TWINLFT, TWINRGT,     LLOCK,
        _______, LTRANS,LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,     _______,  _______,
        _______,    LTRANS,LTRANS, _______,_______,LTRANS,_______,_______,_______,LTRANS, LTRANS, LTRANS, LTRANS, _______,    _______,
        _______,        _______,LTRANS,LTRANS, _______,_______,_______,_______,_______, LTRANS, LTRANS, LTRANS,     _______,   LTRANS,
        _______,          LTRANS, LTRANS, LTRANS, _______,_______, LTRANS, _______,LTRANS,LTRANS,LTRANS,    _______,  LTRANS, _______,
        _______,    _______,  KC_LALT,                      LTRANS,                      KC_LALT,  _______,  LTRANS,  LTRANS,  LTRANS
    ),

//  [WSYM_LAYR] (blue)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    | SUP1 || SUP2 || SUP3 ||      |    |SUITH ||SUITD ||SUITC ||SUITS |    |CIRCLI||      ||      || NBSP |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |TD(G) ||TD(O1)||OPT2  ||OPT3  ||OPT4  ||OPT5  ||OPT6  ||OPT7  ||OPT8  ||OPT9  ||OPT0  ||OPTMIN||OPTEQ ||              ||      |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||OPTQ  ||OPTW  ||TD(E) ||OPTR  ||OPTT  ||OPTY  ||TD(U) ||TD(I) ||OPTO  ||OPTP  ||OPTLBR||OPTRBR||OPTBSL    ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||OPTA  ||OPTS  ||OPTD  ||OPTF  ||OPTG  ||OPTH  ||OPTJ  ||OPTK  ||OPTL  ||OPTSEM||OPTAPO||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||OPTZ  ||OPTX  ||OPTC  ||OPTV  ||OPTB  ||TD(N) ||OPTM  ||OPTCOM||OPTDOT||OPTSLS||           ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [WSYM_LAYR] = LAYOUT_ansi(
        _______,     SUP1,   SUP2,   SUP3, _______,     SUITH,  SUITD,  SUITC,  SUITS,     CIRCLI, _______, _______, NBSP,        LLOCK,
        TD(ACT_GRV), TD(ACT_1), OPT2, OPT3, OPT4, OPT5,  OPT6,   OPT7,  OPT8,   OPT9,  OPT0,   OPTMIN,  OPTEQ,     _______, ENC_UNIMENU,
        _______,    OPTQ,  OPTW, TD(ACT_E), OPTR,  OPTT,   OPTY, TD(ACT_U), TD(ACT_I), OPTO, OPTP,  OPTLBR,  OPTRBR, OPTBSL,    _______,
        _______,        OPTA,  OPTS,  OPTD,  OPTF,   OPTG,     OPTH,   OPTJ,   OPTK,   OPTL,   OPTSEM, OPTAPO,      _______,    _______,
        _______,           OPTZ,  OPTX,  OPTC,   OPTV,   OPTB, TD(ACT_N),  OPTM,   OPTCOM,  OPTDOT, OPTSLS,   _______, _______, _______,
        _______,    _______,  _______,                      _______,                    _______,   _______,   _______, _______, _______
    ),


//  [MSYM_LAYR] (blue)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    | SUP1 || SUP2 || SUP3 ||      |    |SUITH ||SUITD ||SUITC ||SUITS |    |CIRCLI||      ||      || NBSP |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              ||      |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS    ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |    LShift       ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||  RShift   ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [MSYM_LAYR] = LAYOUT_ansi(
        _______,     SUP1,   SUP2,   SUP3, _______,     SUITH,  SUITD,  SUITC,  SUITS,     CIRCLI, _______, _______, NBSP,        LLOCK,
        LTRANS,  LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,   _______, ENC_UNIMENU,
        _______,     LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS ,LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    _______,
        _______,         LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,     _______,   _______,
        KC_LSFT,           LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    KC_RSFT, _______, _______,
        _______,  _______,  _______,                        _______,                      _______,  _______,  _______, _______, _______
    ),

//  [WIDE_LAYR] (purple)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |      ||      ||      ||      |    |      ||      ||      ||      |    |      ||      ||      ||      |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              ||BBrTxt|  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS    ||BarTxt|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||               ||SThru |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||           ||      ||UnderL|  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [WIDE_LAYR] = LAYOUT_ansi(
        _______, _______, _______, _______, _______,  _______, _______, _______, _______,  _______, _______, _______, _______,    LLOCK,
        LTRANS,  LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,      _______,  BBRTEXT,
        _______,     LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS ,LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    BARTEXT,
        _______,         LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,     _______,     STHRU,
        _______,           LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    _______, _______, UNDERLN,
        _______,  _______,  _______,                        LTRANS,                      _______,  _______,   _______, _______, _______
    ),

//  [CIRC_LAYR] (coral)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |      ||      ||      ||      |    |      ||      ||      ||      |    |      ||      ||      ||      |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |      ||CIRCL1||CIRCL2||CIRCL3||CIRCL4||CIRCL5||CIRCL6||CIRCL7||CIRCL8||CIRCL9||CIRCL0||      ||      ||              ||      |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||CIRCLQ||CIRCLW||CIRCLE||CIRCLR||CIRCLT||CIRCLY||CIRCLU||CIRCLI||CIRCLO||CIRCLP||      ||      ||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||CIRCLA||CIRCLS||CIRCLD||CIRCLF||CIRCLG||CIRCLH||CIRCLJ||CIRCLK||CIRCLL||      ||      ||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||CIRCLZ||CIRCLX||CIRCLC||CIRCLV||CIRCLB||CIRCLN||CIRCLM||      ||      ||      ||           ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [CIRC_LAYR] = LAYOUT_ansi(
        _______, _______, _______, _______, _______,  _______, _______, _______, _______,  _______, _______, _______, _______,    LLOCK,
        _______,  CIRCL1, CIRCL2, CIRCL3, CIRCL4, CIRCL5, CIRCL6, CIRCL7, CIRCL8, CIRCL9, CIRCL0, _______, _______,    _______, _______,
        _______,     CIRCLQ, CIRCLW, CIRCLE, CIRCLR, CIRCLT, CIRCLY, CIRCLU, CIRCLI ,CIRCLO, CIRCLP, _______, _______, _______, _______,
        _______,         CIRCLA, CIRCLS, CIRCLD, CIRCLF, CIRCLG, CIRCLH, CIRCLJ, CIRCLK, CIRCLL, _______, _______,     _______, _______,
        _______,           CIRCLZ, CIRCLX, CIRCLC, CIRCLV, CIRCLB, CIRCLN, CIRCLM, _______, _______, _______, _______, _______, _______,
        _______,  _______,  _______,                        _______,                      _______,  _______,  _______, _______, _______
    ),

//  [EMO_LAYR] (yellow)
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |      |    |Ehand ||ESnail||EStop ||EPack |    |Pizza ||Burger||Chick ||Taco  |    |ESmile||ESmirk||EAston||ESad  |    |LLock |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |      ||  E1  ||  E2  ||  E3  ||  E4  ||  E5  ||  E6  ||  E7  ||  E8  ||  E9  ||  E0  ||  E-  ||  E+  ||              ||ECheck|  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |          ||      || Car  || Bus  ||Train || Taxi ||      ||  US  ||  EI  || EOK  ||  PI  ||      ||      ||          || EDel |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||Aster ||Sungls||      ||      ||Globe || Hash ||      || Keyb ||EBulb ||      ||ESShot||               ||EMark |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||EShh  ||      ||      ||      ||Bottle||Ninja || EMic ||      || Grim || Div  ||           || EUp  ||QMark |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |ELeft ||EDown ||ERght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [EMO_LAYR] = LAYOUT_ansi(
        _______, E_HAND, E_SNAIL, E_STOP, E_PACKAGE,  E_PIZZA, E_BURGER, E_CHICKEN, E_TACO,  E_SMILE, E_SMIRK, E_ASTON, E_SAD,    LLOCK,
        _______,  E_K1,   E_K2,   E_K3,   E_K4,   E_K5,   E_K6,   E_K7,   E_K8,   E_K9,   E_K0,   E_MINS, E_PLUS,      _______, E_CMARK,
        _______,     _______, E_CAR, E_BUS, E_TRAIN, E_TAXI, _______, E_FLAGUS, E_I ,E_OK, E_FLAGPI, _______, _______, _______, E_TRASH,
        _______,       E_STAR, E_SGLASS, _______, _______, E_GLOBE, E_HASH, _______, E_KB, E_BULB, _______, E_SSHOT,   _______, E_EMARK,
        _______,        E_SHH, _______, _______, _______, E_BOTTLE, E_NINJA, E_MIC, _______, E_GRIM, E_DIV, _______, E_POINTU,  E_QMARK,
        _______,  _______,  _______,                       _______,                    _______,  _______,  E_POINTL, E_POINTD, E_POINTR
    ),

//  [LOCK_LAYR]
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |  No  |    |  No  ||  No  ||  No  ||  No  |    |  No  ||  No  ||  No  ||  No  |    |  No  ||  No  ||  No  ||  No  |    |TDUnlk|  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||      No      ||  No  |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |    No    ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||    No    ||  No  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |     No      ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||      No       ||  No  |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |       No        ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||    No     ||  No  ||  No  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |   No    ||   No   ||   No    ||                      No                      ||   No    ||   No    |  |  No  ||  No  ||  No  |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [LOCK_LAYR] = LAYOUT_ansi(
        KC_NO,       KC_NO, KC_NO,  KC_NO,  KC_NO,      KC_NO,  KC_NO,  KC_NO,  KC_NO,     KC_NO,  KC_NO,  KC_NO,  KC_NO,  TD(KB_UNLOCK),
        KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,      KC_NO,       KC_NO,
        KC_NO,       KC_NO, KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,    KC_NO,     KC_NO,
        KC_NO,          KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,       KC_NO,      KC_NO,
        KC_NO,             KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,  KC_NO,     KC_NO,     KC_NO,  KC_NO,
        KC_NO,      KC_NO,    KC_NO,                        KC_NO,                        KC_NO,     KC_NO,      KC_NO,  KC_NO,  KC_NO
    )
};

//  <~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>
//  ~=~=~=~=~=~=~=~=~=~=~=~ LED Indexes ~=~=~=~=~=~=~=~=~=~=~=~
// ,------------------------------------------------------------------------------------------------------------------------------------,
// :   ______      ______________________________      ______________________________      ______________________________      ______   :
// :  |  0   |    |  1   ||  2   ||  3   ||  4   |    |  5   ||  6   ||  7   ||  8   |    |  9   ||  10  ||  11  ||  12  |    |  13  |  :
// :  |______|    |______||______||______||______|    |______||______||______||______|    |______||______||______||______|    |______|  :
// :   ______________________________________________________________________________________________________________________________   :
// :  |  14  ||  15  ||  16  ||  17  ||  18  ||  19  ||  20  ||  21  ||  22  ||  23  ||  24  ||  25  ||  26  ||      27      ||  28  |  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________||______|  :
// :  |    29    ||  30  ||  31  ||  32  ||  33  ||  34  ||  35  ||  36  ||  37  ||  38  ||  39  ||  40  ||  41  ||    42    ||  43  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |     44      ||  45  ||  46  ||  47  ||  48  ||  49  ||  50  ||  51  ||  52  ||  53  ||  54  ||  55  ||      56       ||  57  |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |       58        ||  59  ||  60  ||  61  ||  62  ||  63  ||  64  ||  65  ||  66  ||  67  ||  68  ||    69     ||  70  ||  71  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |   72    ||   73   ||   74    ||                      75                      ||   76    ||   77    |  |  78  ||  79  ||  80  |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    // userspace
    if (!process_record_userspace(keycode,record)) {
        return false;
    }
    // secrets
    return process_record_secrets(keycode, record);
}

void leader_end_user(void) {
    // if either userspace or secrets return false, leader matching stops there
    if (process_leader_userspace() && process_leader_secrets()) {
        // leader sequence failed, so blink the rgb red a few times
        is_leader_error = true;
        leader_error_token = defer_exec(1500, leader_error_callback, NULL);  // schedule callback
    }

    is_in_leader_sequence = false;
}
